{"remainingRequest":"/Users/zhwtest/Desktop/VueProjects/flask_api_ui/node_modules/babel-loader/lib/index.js!/Users/zhwtest/Desktop/VueProjects/flask_api_ui/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js??ref--13-0!/Users/zhwtest/Desktop/VueProjects/flask_api_ui/src/http/axios.js","dependencies":[{"path":"/Users/zhwtest/Desktop/VueProjects/flask_api_ui/src/http/axios.js","mtime":1585623574463},{"path":"/Users/zhwtest/Desktop/VueProjects/flask_api_ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhwtest/Desktop/VueProjects/flask_api_ui/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/zhwtest/Desktop/VueProjects/flask_api_ui/node_modules/@vue/cli-plugin-eslint/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5kZXgtb2YiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IENvb2tpZXMgZnJvbSAnanMtY29va2llJzsKaW1wb3J0IHJvdXRlciBmcm9tICdAL3JvdXRlcic7CmltcG9ydCBjb25maWcgZnJvbSAnLi9jb25maWcnOwovKioKICogYXhpb3Mg5oum5oiq5Zmo6K6+572uCiAqLwoKZXhwb3J0IHZhciByZXF1ZXMgPSBmdW5jdGlvbiByZXF1ZXMob3B0aW9ucykgewogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICB2YXIgaW5zdGFuY2UgPSBheGlvcy5jcmVhdGUoewogICAgICAvLyDpnIDopoHlr7nmjqXlhbbku5bkurrmjqXlj6PvvIzmiYDku6Xov5nph4zkuI3lrprkuYl1cmwKICAgICAgLy8gYmFzZVVSTDogY29uZmlnLmJhc2VVcmwsCiAgICAgIGhlYWRlcnM6IGNvbmZpZy5oZWFkZXJzLAogICAgICB0aW1lb3V0OiBjb25maWcudGltZW91dCwKICAgICAgd2l0aENyZWRlbnRpYWxzOiBjb25maWcud2l0aENyZWRlbnRpYWxzCiAgICB9KTsgLy8gcmVxdWVzdCDor7fmsYLmi6bmiKrlmagKCiAgICBpbnN0YW5jZS5pbnRlcmNlcHRvcnMucmVxdWVzdC51c2UoZnVuY3Rpb24gKGNvbmZpZykgewogICAgICB2YXIgdG9rZW4gPSBDb29raWVzLmdldCgndG9rZW4nKTsgLy8g5Y+R6YCB6K+35rGC5pe25pC65bimdG9rZW4KCiAgICAgIGlmICh0b2tlbikgewogICAgICAgIGNvbmZpZy5oZWFkZXJzLnRva2VuID0gdG9rZW47CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8g6YeN5a6a5ZCR5Yiw55m75b2V6aG16Z2iCiAgICAgICAgcm91dGVyLnB1c2goJy9sb2dpbicpOwogICAgICB9CgogICAgICByZXR1cm4gY29uZmlnOwogICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgIC8vIOivt+axguWPkeeUn+mUmeivr+aXtgogICAgICBjb25zb2xlLmxvZygncmVxdWVzdDonLCBlcnJvcik7IC8vIOWIpOaWreivt+axgui2heaXtgoKICAgICAgaWYgKGVycm9yLmNvZGUgPT09ICdFQ09OTkFCT1JURUQnICYmIGVycm9yLm1lc3NhZ2UuaW5kZXhPZigndGltZW91dCcpICE9PSAtMSkgewogICAgICAgIGNvbnNvbGUubG9nKCd0aW1lb3V06K+35rGC6LaF5pe2Jyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7IC8vIOWcqOiwg+eUqOeahOmCo+i+ueWPr+S7peaLv+WIsChjYXRjaCnkvaDmg7Pov5Tlm57nmoTplJnor6/kv6Hmga8KICAgIH0pOyAvLyByZXNwb25zZSDlk43lupTmi6bmiKrlmagKCiAgICBpbnN0YW5jZS5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICByZXR1cm4gcmVzcG9uc2U7CiAgICB9LCBmdW5jdGlvbiAoZXJyKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTsKICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7IC8vIOi/lOWbnuaOpeWPo+i/lOWbnueahOmUmeivr+S/oeaBrwogICAgfSk7IC8vIOivt+axguWkhOeQhgoKICAgIGluc3RhbmNlKG9wdGlvbnMpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICByZXNvbHZlKHJlcyk7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlcnJvcikgewogICAgICByZWplY3QoZXJyb3IpOwogICAgfSk7CiAgfSk7Cn07CmV4cG9ydCB2YXIgcmVxdWVzdFR3byA9IGZ1bmN0aW9uIHJlcXVlc3RUd28ob3B0aW9ucykgewogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICB2YXIgaW5zdGFuY2UgPSBheGlvcy5jcmVhdGUoewogICAgICBoZWFkZXI6IHsKICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlO2NoYXJzZXQ9VVRGLTgnCiAgICAgIH0sCiAgICAgIHRpbWVvdXQ6IGNvbmZpZy50aW1lb3V0LAogICAgICB3aXRoQ3JlZGVudGlhbHM6IGNvbmZpZy53aXRoQ3JlZGVudGlhbHMKICAgIH0pOyAvLyByZXF1ZXN0IOivt+axguaLpuaIquWZqAoKICAgIGluc3RhbmNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgICAgIGlmIChjb25maWcubWV0aG9kID09PSAncG9zdCcpIHsKICAgICAgICB2YXIgcmV0ID0gJyc7CgogICAgICAgIGZvciAodmFyIGl0IGluIGNvbmZpZy5kYXRhKSB7CiAgICAgICAgICByZXQgKz0gZW5jb2RlVVJJQ29tcG9uZW50KGl0KSArICc9JyArIGVuY29kZVVSSUNvbXBvbmVudChjb25maWcuZGF0YVtpdF0pICsgJyYnOwogICAgICAgIH0KCiAgICAgICAgY29uZmlnLmRhdGEgPSByZXQ7CiAgICAgIH0KCiAgICAgIHZhciB0b2tlbiA9IENvb2tpZXMuZ2V0KCd0b2tlbicpOyAvLyDlj5HpgIHor7fmsYLml7bmkLrluKZ0b2tlbgoKICAgICAgaWYgKHRva2VuKSB7CiAgICAgICAgY29uZmlnLmhlYWRlcnMudG9rZW4gPSB0b2tlbjsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyDph43lrprlkJHliLDnmbvlvZXpobXpnaIKICAgICAgICByb3V0ZXIucHVzaCgnL2xvZ2luJyk7CiAgICAgIH0KCiAgICAgIHJldHVybiBjb25maWc7CiAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAgICAgLy8g6K+35rGC5Y+R55Sf6ZSZ6K+v5pe2CiAgICAgIGNvbnNvbGUubG9nKCdyZXF1ZXN0OicsIGVycm9yKTsgLy8g5Yik5pat6K+35rGC6LaF5pe2CgogICAgICBpZiAoZXJyb3IuY29kZSA9PT0gJ0VDT05OQUJPUlRFRCcgJiYgZXJyb3IubWVzc2FnZS5pbmRleE9mKCd0aW1lb3V0JykgIT09IC0xKSB7CiAgICAgICAgY29uc29sZS5sb2coJ3RpbWVvdXTor7fmsYLotoXml7YnKTsKICAgICAgfQoKICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsgLy8g5Zyo6LCD55So55qE6YKj6L655Y+v5Lul5ou/5YiwKGNhdGNoKeS9oOaDs+i/lOWbnueahOmUmeivr+S/oeaBrwogICAgfSk7IC8vIHJlc3BvbnNlIOWTjeW6lOaLpuaIquWZqAoKICAgIGluc3RhbmNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgIHJldHVybiByZXNwb25zZTsKICAgIH0sIGZ1bmN0aW9uIChlcnIpIHsKICAgICAgY29uc29sZS5lcnJvcihlcnIpOwogICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyKTsgLy8g6L+U5Zue5o6l5Y+j6L+U5Zue55qE6ZSZ6K+v5L+h5oGvCiAgICB9KTsgLy8g6K+35rGC5aSE55CGCgogICAgaW5zdGFuY2Uob3B0aW9ucykudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgIHJlc29sdmUocmVzKTsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSkuY2F0Y2goZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgIHJlamVjdChlcnJvcik7CiAgICB9KTsKICB9KTsKfTs="},{"version":3,"sources":["/Users/zhwtest/Desktop/VueProjects/flask_api_ui/src/http/axios.js"],"names":["axios","Cookies","router","config","reques","options","Promise","resolve","reject","instance","create","headers","timeout","withCredentials","interceptors","request","use","token","get","push","error","console","log","code","message","indexOf","response","err","then","res","catch","requestTwo","header","method","ret","it","data","encodeURIComponent"],"mappings":"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","sourcesContent":["import axios from 'axios'\nimport Cookies from 'js-cookie'\nimport router from '@/router'\nimport config from './config'\n/**\n * axios 拦截器设置\n */\nexport const reques = options => {\n  return new Promise((resolve, reject) => {\n    const instance = axios.create({\n      // 需要对接其他人接口，所以这里不定义url\n      // baseURL: config.baseUrl,\n      headers: config.headers,\n      timeout: config.timeout,\n      withCredentials: config.withCredentials\n    })\n    // request 请求拦截器\n    instance.interceptors.request.use(\n      config => {\n        let token = Cookies.get('token')\n        // 发送请求时携带token\n        if (token) {\n          config.headers.token = token\n        } else {\n          // 重定向到登录页面\n          router.push('/login')\n        }\n        return config\n      },\n      error => {\n        // 请求发生错误时\n        console.log('request:', error)\n        // 判断请求超时\n        if (\n          error.code === 'ECONNABORTED' &&\n          error.message.indexOf('timeout') !== -1\n        ) {\n          console.log('timeout请求超时')\n        }\n        return Promise.reject(error) // 在调用的那边可以拿到(catch)你想返回的错误信息\n      }\n    )\n\n    // response 响应拦截器\n    instance.interceptors.response.use(\n      response => {\n        return response\n      },\n      err => {\n        console.error(err)\n        return Promise.reject(err) // 返回接口返回的错误信息\n      }\n    )\n    // 请求处理\n    instance(options)\n      .then(res => {\n        resolve(res)\n        return false\n      })\n      .catch(error => {\n        reject(error)\n      })\n  })\n}\n\nexport const requestTwo = options => {\n  return new Promise((resolve, reject) => {\n    const instance = axios.create({\n      header: {\n        'Content-Type': 'application/x-www-form-urlencode;charset=UTF-8'\n      },\n      timeout: config.timeout,\n      withCredentials: config.withCredentials\n    })\n    // request 请求拦截器\n    instance.interceptors.request.use(\n      config => {\n        if (config.method === 'post') {\n          let ret = ''\n          for (let it in config.data) {\n            ret +=\n              encodeURIComponent(it) +\n              '=' +\n              encodeURIComponent(config.data[it]) +\n              '&'\n          }\n          config.data = ret\n        }\n\n        let token = Cookies.get('token')\n        // 发送请求时携带token\n        if (token) {\n          config.headers.token = token\n        } else {\n          // 重定向到登录页面\n          router.push('/login')\n        }\n        return config\n      },\n      error => {\n        // 请求发生错误时\n        console.log('request:', error)\n        // 判断请求超时\n        if (\n          error.code === 'ECONNABORTED' &&\n          error.message.indexOf('timeout') !== -1\n        ) {\n          console.log('timeout请求超时')\n        }\n        return Promise.reject(error) // 在调用的那边可以拿到(catch)你想返回的错误信息\n      }\n    )\n\n    // response 响应拦截器\n    instance.interceptors.response.use(\n      response => {\n        return response\n      },\n      err => {\n        console.error(err)\n        return Promise.reject(err) // 返回接口返回的错误信息\n      }\n    )\n    // 请求处理\n    instance(options)\n      .then(res => {\n        resolve(res)\n        return false\n      })\n      .catch(error => {\n        reject(error)\n      })\n  })\n}\n"]}]}