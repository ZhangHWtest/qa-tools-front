{"remainingRequest":"/Users/zhwtest/Desktop/VueProjects/flask_api_ui/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/zhwtest/Desktop/VueProjects/flask_api_ui/src/views/interface/components/AddInterface.vue?vue&type=style&index=0&id=1f7ce511&lang=less&scoped=true&","dependencies":[{"path":"/Users/zhwtest/Desktop/VueProjects/flask_api_ui/src/views/interface/components/AddInterface.vue","mtime":1585901689758},{"path":"/Users/zhwtest/Desktop/VueProjects/flask_api_ui/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhwtest/Desktop/VueProjects/flask_api_ui/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/zhwtest/Desktop/VueProjects/flask_api_ui/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/zhwtest/Desktop/VueProjects/flask_api_ui/node_modules/less-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhwtest/Desktop/VueProjects/flask_api_ui/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/zhwtest/Desktop/VueProjects/flask_api_ui/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5pbnRlcmZhY2UtaW5mbyB7CiAgd2lkdGg6IDY1JTsKICBtYXJnaW4tbGVmdDogMTAwcHg7CiAgbWFyZ2luLWJvdHRvbTogMTVweDsKICBwYWRkaW5nLXRvcDogMTVweDsKICBwYWRkaW5nLWJvdHRvbTogMTVweDsKICBwYWRkaW5nLWxlZnQ6IDUwcHg7CiAgcGFkZGluZy1yaWdodDogNTBweDsKICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWVlOwp9Ci5pbnRlcmZhY2UtdGl0bGUtc3R5bGUgewogIGJvcmRlci1sZWZ0OiAzcHggc29saWQgIzIzOTVmMTsKICBwYWRkaW5nLWxlZnQ6IDhweDsKICBtYXJnaW4tYm90dG9tOiA0NXB4OwogIG1hcmdpbi1sZWZ0OiAxNXB4Owp9Ci5nb1Byb2plY3QtZGlhbG9nLWZvb3RlciB7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIHRvcDogNTAlOwogIGxlZnQ6IDUwJTsKICBtYXJnaW46IDAgMCAwIC0xMDBweDsKfQouZ29Qcm9qZWN0LWRpYWxvZy1mb290ZXItaW5mby1wYXJhbSB7CiAgcG9zaXRpb246IHJlbGF0aXZlOwogIHRvcDogNTAlOwogIGxlZnQ6IDQ1JTsKfQoudG9wU3RlcHMgewogIG1hcmdpbi1sZWZ0OiAyMHB4OwogIG1hcmdpbi1yaWdodDogMjBweDsKfQoudG9wU3RlcHNDYXJkIHsKICBtYXJnaW4tYm90dG9tOiA1cHg7Cn0KLmhlYWRlcl9pbnB1dCB7CiAgbWFyZ2luLWJvdHRvbTogMTVweDsKfQo="},{"version":3,"sources":["AddInterface.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6SA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddInterface.vue","sourceRoot":"src/views/interface/components","sourcesContent":["<template>\n  <div>\n    <!-- 面包屑导航区域-->\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\"\n                   class=\"myBreadcrumb\">\n      <el-breadcrumb-item :to=\"{ path: '/home' }\">首页</el-breadcrumb-item>\n      <el-breadcrumb-item :to=\"{ path: '/interface/list' }\">接口列表</el-breadcrumb-item>\n      <el-breadcrumb-item>接口详情</el-breadcrumb-item>\n    </el-breadcrumb>\n    <el-card>\n      <h2 class=\"interface-title-style\">基本信息:</h2>\n      <div class=\"interface-info\">\n        <!-- 内容主体区域-->\n        <el-form ref=\"addFormRef\"\n                 :model=\"createInterfaceBody\"\n                 :rules=\"addRulesForm\"\n                 label-width=\"100px\">\n          <el-form-item label=\"项目名称:\"\n                        v-show=\"formProjectAndModel\"\n                        prop=\"project_name\">\n            <el-select v-model=\"projectList.project_id\"\n                       placeholder=\"请选择项目\"\n                       @change=\"addInterfaceGetModelList(projectList.project_id)\">\n              <el-option v-for=\"item in projectList\"\n                         :key=\"item.project_id\"\n                         :label=\"item.project_name\"\n                         :value=\"item.project_id\">\n              </el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"模块名称:\"\n                        v-show=\"formProjectAndModel\"\n                        prop=\"model_name\">\n            <el-select v-model=\"modelList.model_id\"\n                       placeholder=\"请选择模块\">\n              <el-option v-for=\"item in modelList\"\n                         :key=\"item.model_id\"\n                         :label=\"item.model_name\"\n                         :value=\"item.model_id\">\n              </el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"接口名称:\"\n                        prop=\"interface_name\">\n            <el-input class=\"interface_name\"\n                      placeholder=\"请输接口名称\"\n                      v-model=\"createInterfaceBody.interface_name\"></el-input>\n          </el-form-item>\n\n          <el-form-item label=\"接口类型:\"\n                        prop=\"interface_type\">\n            <el-select v-model=\"createInterfaceBody.interface_type\"\n                       placeholder=\"请选择接口类型\">\n              <el-option v-for=\"item in interface_type_options\"\n                         :key=\"item.value\"\n                         :label=\"item.label\"\n                         :value=\"item.value\">\n              </el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"请求类型:\"\n                        prop=\"method\">\n            <el-select v-model=\"createInterfaceBody.method\"\n                       placeholder=\"请选择请求类型\">\n              <el-option v-for=\"item in method_options\"\n                         :key=\"item.value\"\n                         :label=\"item.label\"\n                         :value=\"item.value\">\n              </el-option>\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"请求路径:\"\n                        prop=\"path\">\n            <el-input class=\"project_name_input\"\n                      placeholder=\"请输入请求路径\"\n                      v-model=\"createInterfaceBody.path\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"接口描述:\"\n                        prop=\"interface_desc\">\n            <el-input class=\"project_name_input\"\n                      type=\"textarea\"\n                      placeholder=\"请输入描述信息\"\n                      v-model=\"createInterfaceBody.interface_desc\"></el-input>\n          </el-form-item>\n        </el-form>\n        <span slot=\"footer\"\n              class=\"goProject-dialog-footer\">\n          <el-button @click=\"goInterfaceList()\">取 消</el-button>\n          <el-button type=\"success\"\n                     @click=\"createInterface()\">提 交</el-button>\n        </span>\n      </div>\n    </el-card>\n    <el-card>\n      <h2 class=\"interface-title-style\">请求参数:</h2>\n      <div class=\"interface-info\">\n        <el-tabs type=\"border-card\">\n          <el-tab-pane label=\"param\">\n            <div>\n              <el-table border\n                        :data=\"createInterfaceBody.params\">\n                <el-table-column label=\"参数名称\"\n                                 prop=\"param_name\"></el-table-column>\n                <el-table-column label=\"是否必填\">\n                  <template slot-scope=\"scope\">\n                    <span v-if=\"scope.row.is_necessary ==0\">必需</span>\n                    <span v-else>非必需</span>\n                  </template>\n                </el-table-column>\n                <el-table-column label=\"参数示例\"\n                                 prop=\"default\"></el-table-column>\n                <el-table-column label=\"备注\"\n                                 prop=\"param_desc\"></el-table-column>\n                <el-table-column label=\"操作\">\n                  <template slot-scope=\"scope\">\n                    <!-- 删除按钮 -->\n                    <el-tooltip class=\"item\"\n                                effect=\"dark\"\n                                content=\"删除\"\n                                placement=\"top\">\n                      <el-button type=\"danger\"\n                                 icon=\"el-icon-delete\"\n                                 size=\"mini\"\n                                 ricon=\"el-icon-edit\"\n                                 circle\n                                 @click=\"removeInterfaceById(scope.row.interface_id)\"></el-button>\n                    </el-tooltip>\n                  </template>\n                </el-table-column>\n              </el-table>\n              <span slot=\"footer\"\n                    class=\"goProject-dialog-footer-info-param\">\n                <el-button type=\"success\"\n                           icon=\"el-icon-plus\"\n                           size=\"small\"\n                           circle></el-button>\n              </span>\n            </div>\n          </el-tab-pane>\n          <el-tab-pane label=\"header\">\n            <div>\n              <el-input class=\"header_input\"\n                        type=\"textarea\"\n                        placeholder=\"示例：{'Content-Type':'application/x-www-form-urlencoded'}\"\n                        v-model=\"createInterfaceBody.header\"></el-input>\n              <span slot=\"footer\"\n                    class=\"goProject-dialog-footer-info-param\">\n                <el-button type=\"success\"\n                           icon=\"el-icon-plus\"\n                           size=\"small\"\n                           circle></el-button>\n              </span>\n            </div>\n          </el-tab-pane>\n        </el-tabs>\n      </div>\n    </el-card>\n    <el-card>\n      <h2 class=\"interface-title-style\">返回数据设置:</h2>\n      <div class=\"interface-info\">\n        <el-input type=\"textarea\"\n                  :autosize=\"{ minRows: 2, maxRows: 4}\"\n                  placeholder=\"请输入内容\"\n                  v-model=\"createInterfaceBody.response\">\n        </el-input>\n\n      </div>\n    </el-card>\n  </div>\n</template>\n\n<script>\nexport default {\n  data () {\n    return {\n      formProjectAndModel: true,\n      createInterfaceBody: {\n        project_id: '',\n        model_id: '',\n        interface_name: '',\n        interface_desc: '',\n        interface_type: '',\n        method: '',\n        path: ''\n      },\n      projectList: {\n        project_id: '',\n        project_name: ''\n      },\n      getModelListBody: {\n        project_id: ''\n      },\n      modelList: {\n        model_id: '',\n        model_name: ''\n      },\n      interfaceInfo: {\n        interface_id: ''\n      },\n      getProjectList: {},\n      interface_type_options: [{\n        value: 'http',\n        label: 'http'\n      }, {\n        value: 'https',\n        label: 'https'\n      }],\n      method_options: [{\n        value: 'GET',\n        label: 'GET'\n      }, {\n        value: 'POST',\n        label: 'POST'\n      }],\n      addRulesForm: {\n        project_name: [\n          { required: true, message: '请输入项目名', trigger: 'blur' }\n        ],\n        interface_name: [\n          { required: true, message: '请输入接口名', trigger: 'blur' }\n        ],\n        interface_type: [\n          { required: true }\n        ],\n        method: [\n          { required: true }\n        ],\n        path: [\n          { required: true, message: '请输入路径', trigger: 'blur' }\n        ]\n      }\n    }\n  },\n  created () {\n    // this.projectList = this.$store.state.projectArr\n    if (this.$route.query.info) {\n      this.formProjectAndModel = false\n      // 修改的话获取当前interface详情\n      this.getInterfaceInfo()\n    }\n\n    // 获取所有project\n    this.addInterfaceGetProjectList()\n  },\n  methods: {\n    goInterfaceList () {\n      this.$router.push('/interface/list')\n    },\n    async getInterfaceInfo () {\n      this.interfaceInfo.interface_id = this.$route.query.info.interface_id\n      this.interfaceInfo.project_name = this.$route.query.info.project_name\n      const { data: res } = await this.$api.myinterface.getInterfaceInfoMethod(\n        this.interfaceInfo\n      )\n      if (res.code !== 1) {\n        return this.$message.error('获取接口列表失败！')\n      }\n      this.createInterfaceBody = res.data\n    },\n\n    // 获取所有项目的id和名称\n    async addInterfaceGetProjectList () {\n      const { data: projectRes } = await this.$api.project.getProjectList(\n        this.getProjectList\n      )\n      if (projectRes.code !== 1) {\n        return this.$message.error('获取项目列表失败！')\n      }\n      this.projectList = projectRes.data\n    },\n    // 根据项目id获取模块\n    async addInterfaceGetModelList (id) {\n      this.getModelListBody.project_id = id\n      const { data: responseBody } = await this.$api.project.getModelList(\n        this.getModelListBody\n      )\n      if (responseBody.code !== 1) {\n        return this.$message.error('获取模块列表失败！')\n      }\n      this.modelList = responseBody.data\n    },\n    // 创建接口\n    async createInterface () {\n      if (!this.$route.query.info) {\n        this.createInterfaceBody.project_id = this.projectList.project_id\n        this.createInterfaceBody.model_id = this.modelList.model_id\n        const { data: createModelRes } = await this.$api.myinterface.createInterfaceMethod(\n          this.createInterfaceBody\n        )\n        if (createModelRes.code === 1) {\n          this.$message.success('添加接口成功！')\n        } else {\n          this.$message.error('添加接口失败！')\n        }\n      }\n    }\n\n  }\n}\n</script>\n<style lang=\"less\" scoped>\n.interface-info {\n  width: 65%;\n  margin-left: 100px;\n  margin-bottom: 15px;\n  padding-top: 15px;\n  padding-bottom: 15px;\n  padding-left: 50px;\n  padding-right: 50px;\n  background-color: #eee;\n}\n.interface-title-style {\n  border-left: 3px solid #2395f1;\n  padding-left: 8px;\n  margin-bottom: 45px;\n  margin-left: 15px;\n}\n.goProject-dialog-footer {\n  position: relative;\n  top: 50%;\n  left: 50%;\n  margin: 0 0 0 -100px;\n}\n.goProject-dialog-footer-info-param {\n  position: relative;\n  top: 50%;\n  left: 45%;\n}\n.topSteps {\n  margin-left: 20px;\n  margin-right: 20px;\n}\n.topStepsCard {\n  margin-bottom: 5px;\n}\n.header_input {\n  margin-bottom: 15px;\n}\n</style>\n"]}]}