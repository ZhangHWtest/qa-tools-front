(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8f488f0a"],{"179a":function(e,t,a){"use strict";var r=a("2270"),s=a.n(r);s.a},2270:function(e,t,a){},"5b52":function(e,t,a){},8938:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{staticClass:"myBreadcrumb",attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/home"}}},[e._v("首页")]),a("el-breadcrumb-item",{attrs:{to:{path:"/case/list"}}},[e._v("用例列表")]),a("el-breadcrumb-item",[e._v("用例详情")])],1),a("case-project",{attrs:{createCaseBody:e.createCaseBody,addRulesForm:e.addRulesForm},on:{listenToChildProjectId:e.getModelListmethod,listenToChildModelId:e.getInterfaceListmethod,listenToChildInterfaceId:e.getInterfacemethod,listenToChildEnvId:e.getEnvmethod}}),a("case-basic",{attrs:{createCaseBody:e.createCaseBody}}),a("case-result-check",{attrs:{createCaseBody:e.createCaseBody,addRulesForm:e.addRulesForm}}),a("el-card",{staticClass:"footer-card"},[a("div",{staticClass:"footer-button"},[a("el-button",{on:{click:function(t){return e.goCaseList()}}},[e._v("取 消")]),a("el-button",{attrs:{type:"success"},on:{click:function(t){e.addCaseMethod()}}},[e._v("提 交")])],1)])],1)},s=[],o=(a("96cf"),a("1da1")),n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",[a("h2",{staticClass:"case-title-style"},[e._v("基本信息:")]),a("div",{staticClass:"case-info"},[a("el-form",{ref:"addFormRef",attrs:{model:e.createCaseBody,rules:e.addRulesForm,"label-width":"100px"}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formProjectAndModel,expression:"formProjectAndModel"}],attrs:{label:"项目名称:",prop:"project_name"}},[a("el-select",{attrs:{placeholder:"请选择项目"},on:{change:function(t){return e.getModelListmethod(e.projectList.project_id)}},model:{value:e.projectList.project_id,callback:function(t){e.$set(e.projectList,"project_id",t)},expression:"projectList.project_id"}},e._l(e.projectList,(function(e){return a("el-option",{key:e.project_id,attrs:{label:e.project_name,value:e.project_id}})})),1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formProjectAndModel,expression:"formProjectAndModel"}],attrs:{label:"模块名称:"}},[a("el-select",{attrs:{placeholder:"请选择模块"},on:{change:function(t){return e.getInterfaceListmethod(e.modelList.model_id)}},model:{value:e.modelList.model_id,callback:function(t){e.$set(e.modelList,"model_id",t)},expression:"modelList.model_id"}},e._l(e.modelList.list,(function(e){return a("el-option",{key:e.model_id,attrs:{label:e.model_name,value:e.model_id}})})),1)],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.formProjectAndModel,expression:"formProjectAndModel"}],attrs:{label:"接口名称:",prop:"interface_name"}},[a("el-select",{attrs:{placeholder:"请选择接口"},on:{change:function(t){return e.getInterfacemethod(e.interfaceList.interface_id)}},model:{value:e.interfaceList.interface_id,callback:function(t){e.$set(e.interfaceList,"interface_id",t)},expression:"interfaceList.interface_id"}},e._l(e.interfaceList,(function(e){return a("el-option",{key:e.interface_id,attrs:{label:e.interface_name,value:e.interface_id}})})),1)],1),a("el-form-item",{attrs:{label:"选择环境:",prop:"env_name"}},[a("el-select",{attrs:{placeholder:"选择环境"},on:{change:function(t){return e.getEnvmethod(e.envList.env_id)}},model:{value:e.envList.env_id,callback:function(t){e.$set(e.envList,"env_id",t)},expression:"envList.env_id"}},e._l(e.envList,(function(e){return a("el-option",{key:e.env_id,attrs:{label:e.env_name,value:e.env_id}})})),1)],1),a("el-form-item",{attrs:{label:"用例名称:",prop:"case_name"}},[a("el-input",{staticClass:"project_name_input",attrs:{placeholder:"请输入用例名称"},model:{value:e.createCaseBody.case_name,callback:function(t){e.$set(e.createCaseBody,"case_name",t)},expression:"createCaseBody.case_name"}})],1),a("el-form-item",{attrs:{label:"地址:",prop:"path"}},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"路径："},model:{value:e.createCaseBody.path,callback:function(t){e.$set(e.createCaseBody,"path",t)},expression:"createCaseBody.path"}},[a("el-select",{staticClass:"caseInfo-select",attrs:{slot:"prepend",placeholder:"类型"},slot:"prepend",model:{value:e.createCaseBody.case_type,callback:function(t){e.$set(e.createCaseBody,"case_type",t)},expression:"createCaseBody.case_type"}},[a("el-option",{attrs:{label:"http",value:"http"}}),a("el-option",{attrs:{label:"https",value:"https"}})],1),a("el-select",{staticClass:"caseInfo-select",attrs:{slot:"prepend",placeholder:"方法"},slot:"prepend",model:{value:e.createCaseBody.method,callback:function(t){e.$set(e.createCaseBody,"method",t)},expression:"createCaseBody.method"}},[a("el-option",{attrs:{label:"GET",value:"GET"}}),a("el-option",{attrs:{label:"POST",value:"POST"}})],1)],1)],1),a("el-form-item",{attrs:{label:"结果断言:",prop:"res_assert"}},[a("el-input",{attrs:{placeholder:"请输入验证的断言"},model:{value:e.createCaseBody.res_assert,callback:function(t){e.$set(e.createCaseBody,"res_assert",t)},expression:"createCaseBody.res_assert"}})],1),a("el-form-item",{attrs:{label:"执行结果:",prop:"save_result"}},[a("el-radio",{attrs:{label:1},model:{value:e.createCaseBody.save_result,callback:function(t){e.$set(e.createCaseBody,"save_result",t)},expression:"createCaseBody.save_result"}},[e._v("保存")]),a("el-radio",{attrs:{label:0},model:{value:e.createCaseBody.save_result,callback:function(t){e.$set(e.createCaseBody,"save_result",t)},expression:"createCaseBody.save_result"}},[e._v("不保存")])],1),a("el-form-item",{attrs:{label:"用例描述:"}},[a("el-input",{staticClass:"project_name_input",attrs:{type:"textarea",placeholder:"请输入描述信息"},model:{value:e.createCaseBody.case_desc,callback:function(t){e.$set(e.createCaseBody,"case_desc",t)},expression:"createCaseBody.case_desc"}})],1)],1)],1)])},i=[],c={props:{createCaseBody:{},addRulesForm:{}},data:function(){return{childCreateCaseBody:"",getProjectListBody:{},getModelListBody:{project_id:""},getInterfaceListBody:{project_id:"",model_id:""},getEnvListBody:{},projectList:{project_id:"",project_name:""},modelList:{model_id:"",model_name:"",list:[]},interfaceList:[],envList:[],formProjectAndModel:!0}},created:function(){this.getEnvListmethod(),window.sessionStorage.getItem("case_id")?this.formProjectAndModel=!1:this.getProjectListMethod()},methods:{getProjectListMethod:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$api.project.getProjectList(this.getProjectListBody);case 2:if(t=e.sent,a=t.data,1===a.code){e.next=6;break}return e.abrupt("return",this.$message.error("获取项目列表失败！"));case 6:this.projectList=a.data;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getModelListmethod:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$emit("listenToChildProjectId",t),this.getModelListBody.project_id=t,e.next=4,this.$api.project.getModelList(this.getModelListBody);case 4:if(a=e.sent,r=a.data,1===r.code){e.next=8;break}return e.abrupt("return",this.$message.error("获取模块列表失败！"));case 8:this.modelList.list=r.data;case 9:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getInterfaceListmethod:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(t){var a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.$emit("listenToChildModelId",t),this.getInterfaceListBody.project_id=this.getModelListBody.project_id,this.getInterfaceListBody.model_id=t,e.next=5,this.$api.myinterface.getInterfaceList(this.getInterfaceListBody);case 5:if(a=e.sent,r=a.data,1===r.code){e.next=9;break}return e.abrupt("return",this.$message.error("获取接口列表失败！"));case 9:this.interfaceList=r.data;case 10:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),getEnvListmethod:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$api.environment.getEnvironmentList(this.getEnvListBody);case 2:if(t=e.sent,a=t.data,1===a.code){e.next=6;break}return e.abrupt("return",this.$message.error("获取接口列表失败！"));case 6:this.envList=a.data;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),getInterfacemethod:function(e){this.$emit("listenToChildInterfaceId",e)},getEnvmethod:function(e){this.$emit("listenToChildEnvId",e)}}},l=c,d=(a("c2ba"),a("2877")),u=Object(d["a"])(l,n,i,!1,null,"14f6ac02",null),p=u.exports,m=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",[a("h2",{staticClass:"case-title-style"},[e._v("请求参数:")]),a("div",{staticClass:"interface-info"},[a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"param"}},[a("div",[a("el-input",{staticClass:"header_input",attrs:{type:"textarea",placeholder:"示例：{'a':'aa','s':'ss'}"},model:{value:e.createCaseBody.params,callback:function(t){e.$set(e.createCaseBody,"params",t)},expression:"createCaseBody.params"}})],1)]),a("el-tab-pane",{attrs:{label:"header"}},[a("div",[a("el-input",{staticClass:"header_input",attrs:{type:"textarea",placeholder:"示例：{'Content-Type':'application/x-www-form-urlencoded'}"},model:{value:e.createCaseBody.header,callback:function(t){e.$set(e.createCaseBody,"header",t)},expression:"createCaseBody.header"}})],1)])],1)],1)])},h=[],f={props:["createCaseBody"],data:function(){return{}}},_=f,v=(a("179a"),Object(d["a"])(_,m,h,!1,null,"d30fdf04",null)),y=v.exports,b=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-card",[a("h2",{staticClass:"case-title-style"},[e._v("依赖:")]),a("div",{staticClass:"interface-info"},[a("el-form",{ref:"addFormRef",attrs:{model:e.createCaseBody,rules:e.addRulesForm,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"是否存在依赖:"}},[a("el-radio",{attrs:{label:1},model:{value:e.createCaseBody.has_rely,callback:function(t){e.$set(e.createCaseBody,"has_rely",t)},expression:"createCaseBody.has_rely"}},[e._v("存在")]),a("el-radio",{attrs:{label:0},model:{value:e.createCaseBody.has_rely,callback:function(t){e.$set(e.createCaseBody,"has_rely",t)},expression:"createCaseBody.has_rely"}},[e._v("不存在")])],1),a("el-form-item",{attrs:{label:"依赖用例:"}},[a("el-input",{attrs:{placeholder:"示例：[{'rely_case_id':4,'rely_param':'zz'}]"},model:{value:e.createCaseBody.rely_info,callback:function(t){e.$set(e.createCaseBody,"rely_info",t)},expression:"createCaseBody.rely_info"}})],1)],1),a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"SQL"}},[a("div",[a("el-input",{staticClass:"header_input",attrs:{type:"textarea",placeholder:"示例：{'Content-Type':'application/x-www-form-urlencoded'}"},model:{value:e.createCaseBody.res_assert,callback:function(t){e.$set(e.createCaseBody,"res_assert",t)},expression:"createCaseBody.res_assert"}})],1)])],1)],1)])},C=[],g={props:["createCaseBody","addRulesForm"],data:function(){return{}}},B=g,L=(a("b19e"),Object(d["a"])(B,b,C,!1,null,"025b15e8",null)),j=L.exports,x={components:{CaseProject:p,CaseBasic:y,CaseResultCheck:j},data:function(){return{createCaseBody:{project_id:"",model_id:"",interface_id:"",env_id:"",case_name:"",case_desc:"",case_type:"http",method:"GET",path:"",params:"",header:"",res_assert:"",has_rely:0,rely_info:"",save_result:1,use_db:0,sql:"",field_value:0},getCaseInfoBody:{case_id:""},addRulesForm:{project_name:[{required:!0,message:"请输入项目名",trigger:"blur"}],interface_name:[{required:!0,message:"请输入接口名",trigger:"blur"}],env_name:[{required:!0,message:"请输入环境名",trigger:"blur"}],case_name:[{required:!0,message:"请输入用例",trigger:"blur"}],interface_type:[{required:!0,trigger:"blur"}],method:[{required:!0,trigger:"blur"}],path:[{required:!0,message:"请输入路径",trigger:"blur"}],res_assert:[{required:!0,message:"请输入结果断言",trigger:"blur"}],save_result:[{required:!0,trigger:"blur"}]}}},created:function(){window.sessionStorage.getItem("case_id")&&(this.getCaseInfoBody.case_id=window.sessionStorage.getItem("case_id"),this.getcaseInfoMethod())},methods:{getModelListmethod:function(e){this.createCaseBody.project_id=e},getInterfaceListmethod:function(e){this.createCaseBody.model_id=e},getInterfacemethod:function(e){this.createCaseBody.interface_id=e},getEnvmethod:function(e){this.createCaseBody.env_id=e},getcaseInfoMethod:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$api.testcase.getCaseInfo(this.getCaseInfoBody);case 2:if(t=e.sent,a=t.data,1===a.code){e.next=6;break}return e.abrupt("return",this.$message.error("获取接口列表失败！"));case 6:this.createCaseBody=a.data;case 7:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),addCaseMethod:function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(){var t,a,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(window.sessionStorage.getItem("case_id")){e.next=10;break}return e.next=3,this.$api.testcase.addCase(this.createCaseBody);case 3:if(t=e.sent,a=t.data,1===a.code){e.next=7;break}return e.abrupt("return",this.$message.error("添加用例失败！"));case 7:this.$message.success("添加用例成功！"),e.next=17;break;case 10:return e.next=12,this.$api.testcase.editCase(this.createCaseBody);case 12:if(r=e.sent,s=r.data,1===s.code){e.next=16;break}return e.abrupt("return",this.$message.error("添修改用例失败！"));case 16:this.$message.success("修改用例成功！");case 17:this.goCaseList();case 18:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),goCaseList:function(){this.$router.push({path:"/case/list"})}}},w=x,k=(a("cc8e"),Object(d["a"])(w,r,s,!1,null,"018c2c81",null));t["default"]=k.exports},"9a19":function(e,t,a){},b19e:function(e,t,a){"use strict";var r=a("5b52"),s=a.n(r);s.a},b6e1:function(e,t,a){},c2ba:function(e,t,a){"use strict";var r=a("b6e1"),s=a.n(r);s.a},cc8e:function(e,t,a){"use strict";var r=a("9a19"),s=a.n(r);s.a}}]);
//# sourceMappingURL=chunk-8f488f0a.js.map